"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7056],{43518:function(e,t,a){var n=a(72791),r=a(10491),s=a(80184);t.Z=function(e){var t=(0,r.L)((function(e){return e.hasPerm})),a=n.useMemo((function(){return e.prefix}),[e.prefix]);return(0,s.jsxs)(s.Fragment,{children:[e.onChangeStatus?(0,s.jsx)("span",{"data-title":"Change Status",className:"".concat(t("status_".concat(a))?"":"disabled"),children:(0,s.jsx)("i",{className:"me-2 fa-solid fa-check-circle text-primary pointer",onClick:e.onChangeStatus})}):"",e.onView?(0,s.jsx)("span",{"data-title":"View Data",className:"".concat(t("view_".concat(a))?"":"disabled"),children:(0,s.jsx)("i",{className:"fa-solid fa-eye pointer me-2 text-info",onClick:e.onView})}):"",e.onEdit?(0,s.jsx)("span",{"data-title":"Edit Data",className:"".concat(t("change_".concat(a))?"":"disabled"),children:(0,s.jsx)("i",{className:"fa-solid fa-pen-to-square pointer me-2 text-warning",onClick:e.onEdit})}):"",(0,s.jsx)("span",{"data-title":"Delete Data",className:"mx-3 ".concat(t("delete_".concat(a))?"":"disabled"),children:(0,s.jsx)("i",{className:" fa-solid fa-trash pointer text-danger",onClick:e.onDelete})})]})}},17056:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(1413),r=a(74165),s=a(15861),c=a(70885),o=a(72791),i=a(43513),u=a(83442),l=a(43518),d=a(78983),m=a(9085),f=a(16871),p=a(43504),x=a(24264),g=a(80184),h=function(e){return(0,g.jsx)(g.Fragment,{children:e.displayStatus?(0,g.jsx)("span",{className:"text-success text-center",children:(0,g.jsx)("i",{className:"fa-solid fa-circle-check"})}):(0,g.jsx)("span",{className:"text-danger text-center",children:(0,g.jsx)("i",{className:"fa-solid fa-circle-xmark"})})})};function j(e,t,a){return String(t[e]).toLocaleLowerCase().replace(/\W/g,"")<String(a[e]).toLocaleLowerCase().replace(/\W/g,"")?-1:String(t[e]).toLocaleLowerCase().replace(/\W/g,"")>String(a[e]).toLocaleLowerCase().replace(/\W/g,"")?1:0}var w=function(){var e=(0,f.s0)(),t=(0,x.Z)().hasPerm,a=o.useState([]),w=(0,c.Z)(a,2),_=w[0],b=w[1],N=o.useState({per_page:100,page_number:1}),S=(0,c.Z)(N,2),Z=S[0],v=S[1],C=o.useState(!0),k=(0,c.Z)(C,2),y=k[0],P=k[1],L=o.useState(0),E=(0,c.Z)(L,2),F=E[0],D=E[1],A=[{name:"Display Name",selector:function(e){return t("feed_camera")?(0,g.jsx)(p.rU,{to:"/camera-details/".concat(e.id),className:"fw-bold link-dark text-decoration-none",children:e.name}):(0,g.jsx)("b",{children:e.name})},sortable:!0,sortFunction:function(e,t){return j("name",e,t)}},{name:"Jurisdiction",selector:function(e){return(0,g.jsx)("span",{className:"text-uppercase",children:e.jurisdiction})},sortable:!0,sortFunction:function(e,t){return j("jurisdiction",e,t)}},{name:"Address",selector:function(e){return e.address},sortable:!0,sortFunction:function(e,t){return j("address",e,t)}},{name:"Id",selector:function(e){return e.unique_id},sortable:!0,sortFunction:function(e,t){return j("unique_id",e,t)}},{name:"Display Status",selector:function(e){return(0,g.jsx)(h,{displayStatus:e.display_status})},sortable:!0,sortFunction:function(e,t){return j("display_status",e,t)}},{name:"Last Modified",selector:function(e){return new Date(e.updated_at).toLocaleString()},sortable:!0,sortFunction:function(e,t){return j("updated_at",e,t)}},{name:"Action",selector:function(e){return(0,g.jsx)(l.Z,{prefix:"camera",onEdit:function(){return O(e)},onDelete:function(){return R(e.id)}})},sortable:!1}],O=function(t){e("/cameras/edit",{state:t})},R=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var a,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Do you really want to delete this record?")){e.next=3;break}return e.abrupt("return");case 3:return a=u.ZP.deleteCameras+t,e.next=6,fetch(a,{method:"GET",headers:{Authorization:(0,u.kE)()}});case 6:return n=e.sent,e.next=9,n.json();case 9:200===e.sent.status&&(P(!y),m.Am.success("Record deleted successfully!"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.useEffect((function(){var e=window.sessionStorage;e.type&&e.message&&(m.Am[e.type](e.message),e.clear())}),[]),o.useEffect((function(){var e=u.ZP.cameras;(0,s.Z)((0,r.Z)().mark((function t(){var a,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e+"?per_page=".concat(Z.per_page,"&page_number=").concat(Z.page_number,"&total_images=0"),{method:"GET",headers:{Authorization:(0,u.kE)()}});case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,b(n.attributes),D(n.totalResult);case 8:case"end":return t.stop()}}),t)})))()}),[Z,y]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.Ix,{position:"top-right",theme:"colored",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,g.jsx)(d.xH,{className:"my-2",children:(0,g.jsx)(d.sl,{children:(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsx)("h5",{className:"text-uppercase",children:"All Cameras"})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsx)(p.rU,{to:"/cameras/add",className:"btn text-uppercase btn-primary m-2 float-end",children:"Add"})})]})})}),(0,g.jsx)(i.ZP,{columns:A,data:_,pagination:!0,onSelectedRowsChange:function(){},paginationServer:!0,paginationTotalRows:F,paginationPerPage:100,paginationRowsPerPageOptions:[100,50,30],defaultSortFieldId:1,className:"camera-table",onChangeRowsPerPage:function(e){return v((0,n.Z)((0,n.Z)({},Z),{},{per_page:e}))},onChangePage:function(e,t){return v((0,n.Z)((0,n.Z)({},Z),{},{page_number:e}))}})]})}},24264:function(e,t,a){var n=a(70885),r=a(72791);t.Z=function(){var e=(0,r.useState)([]),t=(0,n.Z)(e,2),a=t[0],s=t[1];(0,r.useEffect)((function(){var e=window.localStorage.getItem("permissions");s(JSON.parse(e||"[]"))}),[]);return{setPerm:function(e){window.localStorage.setItem("permissions",JSON.stringify(e)),s(e)},hasPerm:function(e){return a.includes(e)}}}}}]);
//# sourceMappingURL=7056.2f88226a.chunk.js.map