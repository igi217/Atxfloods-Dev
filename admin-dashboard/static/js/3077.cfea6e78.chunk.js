"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3077],{93077:function(e,a,t){t.r(a);var n=t(1413),r=t(74165),c=t(15861),o=t(70885),s=t(72791),i=t(43513),u=t(83442),l=t(78983),d=t(9085),m=t(80184),p=function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()-1)};a.default=function(){var e=s.useState(p()),a=(0,o.Z)(e,2),t=a[0],f=a[1],h=s.useState([]),g=(0,o.Z)(h,2),x=g[0],j=g[1],_=s.useState({per_page:100,page_number:1}),v=(0,o.Z)(_,2),b=v[0],w=v[1],y=s.useState(0),N=(0,o.Z)(y,2),S=N[0],Z=N[1],k=[{name:"Camera Id",selector:function(e){return e.unique_id}},{name:"Date",selector:function(e){return new Date(e.date).toLocaleDateString()}},{name:"Name",selector:function(e){return e.name},sortable:!0},{name:"No. of Images",selector:function(e){return e.image},sortable:!0},{name:"Camera Efficiency",selector:function(e){return(e.image/480*100).toFixed(2)+"%"},sortable:!0}];s.useEffect((function(){var e=window.sessionStorage;e.type&&e.message&&(d.Am[e.type](e.message),e.clear())}),[]),s.useEffect((function(){var e=u.ZP.cameraReport;(0,c.Z)((0,r.Z)().mark((function a(){var n,c;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e+"?per_page=".concat(b.per_page,"&page_number=").concat(b.page_number),{method:"POST",headers:{Authorization:(0,u.kE)()},body:JSON.stringify({date:t})});case 2:return n=a.sent,a.next=5,n.json();case 5:c=a.sent,j(c.data),Z(c.totalResult);case 8:case"end":return a.stop()}}),a)})))()}),[b,t]);function O(){return O=(0,c.Z)((0,r.Z)().mark((function e(){var a,n,c,o,s,i,l,d,m,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.ZP.cameraReport,e.next=3,fetch(n+"?per_page=".concat(b.per_page,"&page_number=").concat(b.page_number),{method:"POST",headers:{Authorization:(0,u.kE)()},body:JSON.stringify({date:t})});case 3:return c=e.sent,o="data",s="statistics.csv",e.next=8,c.json();case 8:i=e.sent,console.log(i,o),(null===(a=i[o])||void 0===a?void 0:a.length)>=1&&(l="".concat(Object.keys(i[o][0]).map((function(e){return'"'.concat(e,'"')})).join(","),"\n"),d="",i[o].forEach((function(e){d+="".concat(Object.values(e).map((function(e){return'"'.concat("object"===typeof e?"":e,'"')})).join(","),"\n")})),m=URL.createObjectURL(new Blob([l+d],{type:"text/csv"})),(p=document.createElement("a")).href=m,p.download=s,p.click());case 11:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Ix,{position:"top-right",theme:"colored",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,m.jsx)(l.xH,{className:"my-2",children:(0,m.jsx)(l.sl,{children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsx)("h5",{className:"text-uppercase",children:"Statistics"})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsx)(l.u5,{className:"float-end",onClick:function(){return O.apply(this,arguments)},children:"Download CSV"})})]})})}),(0,m.jsx)(l.xH,{className:"my-2",children:(0,m.jsx)(l.sl,{children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-5 float-end ms-auto",children:(0,m.jsx)(l.jO,{type:"date",defaultValue:t,placeholder:"Search..",className:"search-date",max:p()})}),(0,m.jsx)("div",{className:"col-2",children:(0,m.jsx)(l.u5,{type:"button",className:"float-end w-100",color:"primary",onClick:function(){var e=document.querySelector(".search-date").value;f(e)},children:"Search"})})]})})}),(0,m.jsx)(i.ZP,{columns:k,data:x,pagination:!0,onSelectedRowsChange:function(){},paginationServer:!0,paginationTotalRows:S,paginationPerPage:100,paginationRowsPerPageOptions:[100,50,30],className:"camera-table",onChangeRowsPerPage:function(e){return w((0,n.Z)((0,n.Z)({},b),{},{per_page:e}))},onChangePage:function(e,a){return w((0,n.Z)((0,n.Z)({},b),{},{page_number:e}))}})]})}}}]);
//# sourceMappingURL=3077.cfea6e78.chunk.js.map