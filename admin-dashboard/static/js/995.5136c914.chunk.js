"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[995],{75259:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var s=r(74165),n=r(15861),a=r(70885),c=r(72791),o=r(83442),i=r(9085),l=r(78983),u=r.p+"static/media/template.fdcfd54a8d428c36d3b2.xlsx",m=r(80184),d=function(){var e=(0,c.useState)(!1),t=(0,a.Z)(e,2),r=t[0],d=t[1],p=(0,c.useState)(!1),f=(0,a.Z)(p,2),h=f[0],x=f[1],w=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){var t,r,n,a,c,l,u,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),t=document.querySelector(".import-form"),r=o.ZP.crossingsImport,e.next=5,fetch(r,{method:"POST",headers:{Authorization:(0,o.kE)()},body:new FormData(t)});case 5:if(n=e.sent,d(!1),n.ok){e.next=11;break}return i.Am.error("Error while trying to import data"),t.reset(),e.abrupt("return");case 11:return e.next=13,n.json();case 13:a=e.sent,t.reset(),c=a.data,l=c.errors,u=c.successfull,m=c.warnings,l.forEach((function(e){i.Am.error(e)})),m.forEach((function(e){i.Am.warning(e)})),u&&i.Am.success(u+" Imported Seccessfully");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){var t,r,n,a,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),t=o.ZP.crossingsExport,e.next=4,fetch(t,{method:"GET",headers:{Authorization:(0,o.kE)()}});case 4:return r=e.sent,e.next=7,r.text();case 7:n=e.sent,a=URL.createObjectURL(new Blob([n],{type:"text/csv"})),(c=document.createElement("a")).href=a,c.download="crossings.csv",c.click(),x(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.Ix,{position:"top-right",theme:"colored",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,m.jsx)(l.xH,{className:"my-2",children:(0,m.jsxs)(l.sl,{children:[(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsx)("h5",{className:"d-inline text-uppercase",children:"Crossing Data Import"})}),(0,m.jsx)("div",{className:"col-md-6",children:(0,m.jsxs)("div",{className:"float-end d-inline-flex justify-content-between",children:[(0,m.jsx)("label",{style:{width:"200px"},htmlFor:"file",type:"submit",color:"primary",className:"btn btn-primary m-2",children:r?(0,m.jsx)(l.LQ,{size:"sm",color:"white"}):"Import Crossing Data"}),(0,m.jsx)("span",{style:{width:"200px"},onClick:j,className:"btn btn-success m-2",children:h?(0,m.jsx)(l.LQ,{size:"sm",color:"white"}):"Export Crossing Data"})]})})]}),(0,m.jsx)("a",{className:"text-reset",download:"template.xlsx",href:u,children:"Download Excel Template"})]})}),(0,m.jsx)("form",{encType:"multipart/form-data",className:"d-none import-form",children:(0,m.jsx)("input",{type:"file",name:"file",id:"file",accept:".xlsx",onChange:w})})]})}}}]);
//# sourceMappingURL=995.5136c914.chunk.js.map