"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[236],{43518:function(e,t,n){var a=n(72791),r=n(10491),c=n(80184);t.Z=function(e){var t=(0,r.L)((function(e){return e.hasPerm})),n=a.useMemo((function(){return e.prefix}),[e.prefix]);return(0,c.jsxs)(c.Fragment,{children:[e.onChangeStatus?(0,c.jsx)("span",{"data-title":"Change Status",className:"".concat(t("status_".concat(n))?"":"disabled"),children:(0,c.jsx)("i",{className:"me-2 fa-solid fa-check-circle text-primary pointer",onClick:e.onChangeStatus})}):"",e.onView?(0,c.jsx)("span",{"data-title":"View Data",className:"".concat(t("view_".concat(n))?"":"disabled"),children:(0,c.jsx)("i",{className:"fa-solid fa-eye pointer me-2 text-info",onClick:e.onView})}):"",e.onEdit?(0,c.jsx)("span",{"data-title":"Edit Data",className:"".concat(t("change_".concat(n))?"":"disabled"),children:(0,c.jsx)("i",{className:"fa-solid fa-pen-to-square pointer me-2 text-warning",onClick:e.onEdit})}):"",e.onDelete?(0,c.jsx)("span",{"data-title":"Delete Data",className:"mx-3 ".concat(t("delete_".concat(n))?"":"disabled"),children:(0,c.jsx)("i",{className:" fa-solid fa-trash pointer text-danger",onClick:e.onDelete})}):(0,c.jsx)(c.Fragment,{})]})}},50236:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(1413),r=n(74165),c=n(15861),s=n(70885),o=n(72791),i=n(83442),l=n(73560),u=n(43513),d=(n(64197),n(78983)),f=n(16871),m=n(43518),p=n(80184),g=l.Z.afterToday,h=function(){var e=(0,f.s0)(),t=o.useState([]),n=(0,s.Z)(t,2),h=n[0],_=n[1],x=o.useState(null),j=(0,s.Z)(x,2),v=j[0],y=j[1],b=o.useState({per_page:100,page_number:1}),w=(0,s.Z)(b,2),N=w[0],S=w[1],Z=[{name:"Id",selector:function(e){return e.id},sortable:!0},{name:"IP Address",selector:function(e){return e.ip_address},sortable:!0},{name:"Location",selector:function(e){return e.location},sortable:!0},{name:"Status",selector:function(e){return(0,p.jsx)("span",{className:"status-".concat(e.closed_at?"closed":"open"),children:e.closed_at?"Inactive":"Active"})},sortable:!0},{name:"Entered At",selector:function(e){return new Date(e.created_at).toLocaleString()},sortable:!0},{name:"Left At",selector:function(e){return e.closed_at?new Date(e.closed_at).toLocaleString():""},sortable:!0},{name:"Actions",selector:function(t){return(0,p.jsx)(m.Z,{prefix:"crossing",onView:function(){return e("/access-details",{state:{session_id:t.session_id}})}})}}],k=o.useState(""),C=(0,s.Z)(k,2),P=C[0],D=C[1],O=o.useState(""),E=(0,s.Z)(O,2),R=E[0],L=E[1],A=o.useState("~Q(id=None)"),Q=(0,s.Z)(A,2),T=Q[0],H=Q[1];o.useEffect((function(){var e=i.ZP.traficReport;(0,c.Z)((0,r.Z)().mark((function t(){var n,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:"POST",headers:{Authorization:(0,i.kE)()},body:JSON.stringify({query:T})});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,_(a.data),y(a.total);case 8:case"end":return t.stop()}}),t)})))()}),[T]);function I(){return I=(0,c.Z)((0,r.Z)().mark((function e(){var t,n,a,c,s,o,l,u,d,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.ZP.traficReport,e.next=3,fetch(n+"?per_page=".concat(N.per_page,"&page_number=").concat(N.page_number),{method:"POST",headers:{Authorization:(0,i.kE)()},body:JSON.stringify({query:T})});case 3:return a=e.sent,c="data",s="traffic.csv",e.next=8,a.json();case 8:o=e.sent,(null===(t=o[c])||void 0===t?void 0:t.length)>=1&&(l="".concat(Object.keys(o[c][0]).map((function(e){return'"'.concat(e,'"')})).join(","),"\n"),u="",o[c].forEach((function(e){u+="".concat(Object.values(e).map((function(e){return'"'.concat("object"===typeof e?"":e,'"')})).join(","),"\n")})),d=URL.createObjectURL(new Blob([l+u],{type:"text/csv"})),(f=document.createElement("a")).href=d,f.download=s,f.click());case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.xH,{className:"my-2",children:(0,p.jsx)(d.sl,{children:(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-4",children:(0,p.jsx)(l.Z,{className:"w-100",placeholder:"Entering Time Range",format:"yyyy-MM-dd HH:mm:ss",disabledDate:g(),onChange:function(e){var t;return D(null!==(t=JSON.stringify(null===e||void 0===e?void 0:e.map((function(e){return new Date(e).toISOString()}))))&&void 0!==t?t:"")}})}),(0,p.jsx)("div",{className:"col-4",children:(0,p.jsx)(l.Z,{className:"w-100",placeholder:"Leaving Time Range",format:"yyyy-MM-dd HH:mm:ss",disabledDate:g(),onChange:function(e){var t;return L(null!==(t=JSON.stringify(null===e||void 0===e?void 0:e.map((function(e){return new Date(e).toISOString()}))))&&void 0!==t?t:"")}})}),(0,p.jsx)("div",{className:"col-2",children:(0,p.jsx)(d.u5,{type:"button",className:"float-end w-100",color:"primary",onClick:function(){H(P&&R?"Q(created_at__range=".concat(P,") & Q(closed_at__range=").concat(R,")"):P?"Q(created_at__range=".concat(P,")"):R?"Q(closed_at__range=".concat(R,")"):"~Q(id=None)")},children:"Search"})}),(0,p.jsx)("div",{className:"col-2",children:(0,p.jsx)(d.u5,{type:"button",className:"float-end w-100",color:"success",onClick:function(){return I.apply(this,arguments)},children:"Download CSV"})})]})})}),(0,p.jsx)(u.ZP,{columns:Z,data:h,pagination:!0,paginationServer:!0,paginationPerPage:100,paginationRowsPerPageOptions:[100,50,30],paginationTotalRows:v,onChangeRowsPerPage:function(e){return S((0,a.Z)((0,a.Z)({},N),{},{per_page:e}))},onChangePage:function(e,t){return S((0,a.Z)((0,a.Z)({},N),{},{page_number:e}))}})]})};function _(){return(0,p.jsx)(h,{})}}}]);
//# sourceMappingURL=236.7aba49ef.chunk.js.map