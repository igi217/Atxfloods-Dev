"use strict";(self.webpackChunkatx_floods=self.webpackChunkatx_floods||[]).push([[866],{4866:function(e,n,t){t.r(n);var o=t(4165),r=t(5861),i=t(885),a=t(8559),s=t(6986),c=t(2791),l=t(3442),u=t(7589),d=t(4717),v=t(66),m=t(5703),f=t(184);n.default=function(){var e=c.useState([]),n=(0,i.Z)(e,2),t=n[0],p=n[1],g=c.useState(null),h=(0,i.Z)(g,2),k=h[0],Z=h[1],x=(0,d.lZ)(),S=(0,i.Z)(x,2),C=S[0],j=S[1],w=(0,d.Qh)(),z=(0,i.Z)(w,2),y=z[0],b=z[1],A=c.useState(!0),E=(0,i.Z)(A,2),F=E[0],I=E[1],M=(0,c.useRef)();c.useEffect((function(){var e=l.Z.crossings,n=y?Object.values(y.position):[30.266666,-97.73333],t=y?y.zoom:10,i=a.map("map").setView(n,t,{maxZoom:18});return(0,r.Z)((0,o.Z)().mark((function n(){var t,r,c,l;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return r=n.sent,n.next=5,r.json();case 5:c=n.sent,I(!1),l=new s.MarkerClusterGroup({maxClusterRadius:10,iconCreateFunction:function(e){var n,t,o=e.getAllChildMarkers(),r=o.some((function(e){var n,t,o,r;return null===e||void 0===e||null===(n=e.options)||void 0===n||null===(t=n.icon)||void 0===t||null===(o=t.options)||void 0===o||null===(r=o.iconUrl)||void 0===r?void 0:r.includes("closed.png")})),i=o.some((function(e){var n,t,o,r;return null===e||void 0===e||null===(n=e.options)||void 0===n||null===(t=n.icon)||void 0===t||null===(o=t.options)||void 0===o||null===(r=o.iconUrl)||void 0===r?void 0:r.includes("caution.png")})),s='<div class="leaflet-marker-icon marker-cluster '.concat((n=r,t=i,n?"marker-cluster-large":t?"marker-cluster-medium":"marker-cluster-small"),' leaflet-zoom-animated leaflet-interactive"><div><span>').concat(o.length,"</span></div></div>");return a.divIcon({html:s,className:"mycluster",iconSize:a.point(32,32)})}}),c.attributes.forEach((function(e,n){var t,o=a.marker([e.lat,e.lon],{icon:(t=e.status,a.icon({iconUrl:"/static/svg/".concat(t,".png"),iconSize:[20,20],iconAnchor:[0,0]}))}).on("click",(function(){return Z(n)}));l.addLayer(o)})),null===a||void 0===a||null===(t=a.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{}))||void 0===t||t.addTo(i),i.addLayer(l),i.on("mousemove",(function(){var e=i.getZoom(),n=i.getCenter();M.current={zoom:e,position:n}})),p(c);case 13:case"end":return n.stop()}}),n)})))(),function(){i.remove()}}),[y]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{id:"map",children:[(0,f.jsx)(v.Z,{onClick:function(e){b(M.current)}}),F?(0,f.jsx)(m.Z,{}):(0,f.jsx)(f.Fragment,{})]}),(0,f.jsx)(u.Z,{data:t,id:k,setId:Z,header:!0,toggleFav:j,favs:C,content:"CROSSINGS ARE OPEN"})]})}}}]);
//# sourceMappingURL=866.bf649ea5.chunk.js.map